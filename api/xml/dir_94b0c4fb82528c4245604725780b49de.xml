<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.15.0" xml:lang="en-US">
  <compounddef id="dir_94b0c4fb82528c4245604725780b49de" kind="dir">
    <compoundname>state</compoundname>
    <innerdir refid="dir_c533d1b00932fdf129a636cbef0bfb01">commands</innerdir>
    <innerdir refid="dir_7a23a44b7b02552993267eb30c5e34a1">components</innerdir>
    <innerdir refid="dir_1d18a8675d36aec09032e08314ab095c">dispatcher</innerdir>
    <innerdir refid="dir_24f556f2b844507e90167b0c5b1b7e80">listeners</innerdir>
    <innerdir refid="dir_eb8c49aae6ff5f1b4e001fb64cc65036">types</innerdir>
    <innerfile refid="helios_2engine_2state_2__module_8ixx">helios/engine/state/_module.ixx</innerfile>
    <innerfile refid="CombinedStateToIdMapPair_8ixx">CombinedStateToIdMapPair.ixx</innerfile>
    <innerfile refid="StateCommandHandler_8ixx">StateCommandHandler.ixx</innerfile>
    <innerfile refid="StateManager_8ixx">StateManager.ixx</innerfile>
    <innerfile refid="StateToIdMap_8ixx">StateToIdMap.ixx</innerfile>
    <innerfile refid="StateToIdMapPair_8ixx">StateToIdMapPair.ixx</innerfile>
    <innerfile refid="StateTransitionListener_8ixx">StateTransitionListener.ixx</innerfile>
    <innerfile refid="TypedStateCommandHandler_8ixx">TypedStateCommandHandler.ixx</innerfile>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
<sect1 id="dir_94b0c4fb82528c4245604725780b49de_1autotoc_md664">
<title>helios::engine::state</title><para>Generic, template-based state management system with rule-based transitions.</para>
</sect1>
<sect1 id="dir_94b0c4fb82528c4245604725780b49de_1autotoc_md665">
<title>Overview</title><para>This module provides a complete state management framework including:</para>
<para><itemizedlist>
<listitem><para><bold>State machines</bold> with rule-based transitions and guards</para>
</listitem><listitem><para><bold>Commands and dispatchers</bold> for requesting state changes</para>
</listitem><listitem><para><bold>Listeners</bold> for reacting to state transitions</para>
</listitem><listitem><para><bold>ID mapping utilities</bold> for associating states with viewports/menus</para>
</listitem></itemizedlist>
</para>
<para>All components are parameterized by state type, enabling reuse for different state enums (e.g., GameState, MatchState).</para>
</sect1>
<sect1 id="dir_94b0c4fb82528c4245604725780b49de_1autotoc_md666">
<title>Core Components</title><sect2 id="dir_94b0c4fb82528c4245604725780b49de_1autotoc_md667">
<title>State Management</title><para><table rows="8" cols="2"><row>
<entry thead="yes"><para>Class  </para>
</entry><entry thead="yes"><para>Description  </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>StateManager&lt;StateType&gt;</computeroutput>  </para>
</entry><entry thead="no"><para>Rule-based state machine with listener support  </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>StateTransitionRule&lt;StateType&gt;</computeroutput>  </para>
</entry><entry thead="no"><para>Defines valid transitions with optional guards  </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>StateTransitionListener&lt;StateType&gt;</computeroutput>  </para>
</entry><entry thead="no"><para>Interface for transition observers  </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>LambdaStateListener&lt;StateType&gt;</computeroutput>  </para>
</entry><entry thead="no"><para>Lambda-based listener implementation  </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>StateCommand&lt;StateType&gt;</computeroutput>  </para>
</entry><entry thead="no"><para>Command for requesting transitions  </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>StateCommandDispatcher&lt;StateType&gt;</computeroutput>  </para>
</entry><entry thead="no"><para>Routes commands to handlers  </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>StateComponent&lt;StateType&gt;</computeroutput>  </para>
</entry><entry thead="no"><para>Stores current state on entities  </para>
</entry></row>
</table>
</para>
</sect2>
<sect2 id="dir_94b0c4fb82528c4245604725780b49de_1autotoc_md668">
<title>ID Mapping</title><para><table rows="4" cols="2"><row>
<entry thead="yes"><para>Class  </para>
</entry><entry thead="yes"><para>Description  </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>StateToIdMap&lt;TState, TId&gt;</computeroutput>  </para>
</entry><entry thead="no"><para>Maps a single state type to ID lists  </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>StateToIdMapPair&lt;LState, RState, TId&gt;</computeroutput>  </para>
</entry><entry thead="no"><para>Combines two state maps, returns union  </para>
</entry></row>
<row>
<entry thead="no"><para><computeroutput>CombinedStateToIdMapPair&lt;LState, RState, TId&gt;</computeroutput>  </para>
</entry><entry thead="no"><para>Maps state pairs directly  </para>
</entry></row>
</table>
</para>
</sect2>
</sect1>
<sect1 id="dir_94b0c4fb82528c4245604725780b49de_1autotoc_md669">
<title>Type Trait Specialization</title><para>To use <computeroutput>StateManager&lt;YourState&gt;</computeroutput>, you must specialize <computeroutput>StateTransitionId</computeroutput>:</para>
<para><programlisting filename=".cpp"><codeline><highlight class="comment">//<sp/>In<sp/>your<sp/>bindings<sp/>module:</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"></highlight><highlight class="keyword">template</highlight><highlight class="normal">&lt;&gt;</highlight></codeline>
<codeline><highlight class="normal"></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structhelios_1_1engine_1_1state_1_1types_1_1StateTransitionId" kindref="compound">helios::engine::state::types::StateTransitionId</ref>&lt;<ref refid="namespacehelios_1_1engine_1_1mechanics_1_1gamestate_1_1types_1a8e0bcae228fdf9f4cb489e7f912d80be" kindref="member">GameState</ref>&gt;<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">using<sp/></highlight><highlight class="normal"><ref refid="structhelios_1_1engine_1_1state_1_1types_1_1StateTransitionId_1afc9cc80959b49ee878bcdbb62a56aac7" kindref="member">Type</ref><sp/>=<sp/><ref refid="namespacehelios_1_1engine_1_1mechanics_1_1gamestate_1_1types_1a73539c0b43e1877f9c1e3fd329cc1fa4" kindref="member">GameStateTransitionId</ref>;</highlight></codeline>
<codeline><highlight class="normal">};</highlight></codeline>
</programlisting></para>
</sect1>
<sect1 id="dir_94b0c4fb82528c4245604725780b49de_1autotoc_md670">
<title>Usage</title><sect2 id="dir_94b0c4fb82528c4245604725780b49de_1autotoc_md671">
<title>Defining Rules</title><para><programlisting filename=".cpp"><codeline><highlight class="keyword">using<sp/>namespace<sp/></highlight><highlight class="normal"><ref refid="namespacehelios_1_1engine_1_1state" kindref="compound">helios::engine::state</ref>;</highlight></codeline>
<codeline><highlight class="normal"></highlight><highlight class="keyword">using<sp/>namespace<sp/></highlight><highlight class="normal"><ref refid="namespacehelios_1_1engine_1_1state_1_1types" kindref="compound">helios::engine::state::types</ref>;</highlight></codeline>
<codeline><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"></highlight><highlight class="keyword">constexpr</highlight><highlight class="normal"><sp/><ref refid="classhelios_1_1engine_1_1state_1_1types_1_1StateTransitionRule" kindref="compound">StateTransitionRule&lt;GameState&gt;</ref><sp/>gameStateRules[]<sp/>=<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>{GameState::MainMenu,<sp/>GameStateTransitionId::StartGame,<sp/>GameState::Running},</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>{GameState::Running,<sp/>GameStateTransitionId::Pause,<sp/>GameState::Paused},</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>{GameState::Paused,<sp/>GameStateTransitionId::Resume,<sp/>GameState::Running},</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>{GameState::Running,<sp/>GameStateTransitionId::GameOver,<sp/>GameState::MainMenu,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Optional<sp/>guard:</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>[](</highlight><highlight class="keyword">auto</highlight><highlight class="normal">&amp;<sp/>ctx,<sp/></highlight><highlight class="keyword">auto</highlight><highlight class="normal">&amp;<sp/>req)<sp/>{<sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>ctx.session().lives()<sp/>==<sp/>0;<sp/>}</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline><highlight class="normal">};</highlight></codeline>
</programlisting></para>
</sect2>
<sect2 id="dir_94b0c4fb82528c4245604725780b49de_1autotoc_md672">
<title>Creating the Manager</title><para><programlisting filename=".cpp"><codeline><highlight class="keyword">auto</highlight><highlight class="normal"><sp/>gameStateManager<sp/>=<sp/>std::make_unique&lt;StateManager&lt;GameState&gt;&gt;(gameStateRules);</highlight></codeline>
<codeline><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal">gameStateManager-&gt;addStateListener(</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>std::make_unique&lt;LambdaStateListener&lt;GameState&gt;&gt;(</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>[](</highlight><highlight class="keyword">auto</highlight><highlight class="normal">&amp;<sp/>ctx,<sp/>GameState<sp/>from)<sp/>{<sp/></highlight><highlight class="comment">/*<sp/>onExit<sp/>*/</highlight><highlight class="normal"><sp/>},</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>[](</highlight><highlight class="keyword">auto</highlight><highlight class="normal">&amp;<sp/>ctx,<sp/></highlight><highlight class="keyword">auto</highlight><highlight class="normal"><sp/>transitionCtx)<sp/>{<sp/></highlight><highlight class="comment">/*<sp/>onTransition<sp/>*/</highlight><highlight class="normal"><sp/>},</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>[](</highlight><highlight class="keyword">auto</highlight><highlight class="normal">&amp;<sp/>ctx,<sp/><ref refid="namespacehelios_1_1engine_1_1mechanics_1_1gamestate_1_1types_1a8e0bcae228fdf9f4cb489e7f912d80be" kindref="member">GameState</ref><sp/>to)<sp/>{<sp/></highlight><highlight class="comment">/*<sp/>onEnter<sp/>*/</highlight><highlight class="normal"><sp/>}</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>)</highlight></codeline>
<codeline><highlight class="normal">);</highlight></codeline>
<codeline><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal">gameLoop.addManager(std::move(gameStateManager));</highlight></codeline>
</programlisting></para>
</sect2>
<sect2 id="dir_94b0c4fb82528c4245604725780b49de_1autotoc_md673">
<title>Requesting Transitions</title><para><programlisting filename=".cpp"><codeline><highlight class="normal">updateContext.commandBuffer().add&lt;<ref refid="classhelios_1_1engine_1_1state_1_1commands_1_1StateCommand" kindref="compound">StateCommand&lt;GameState&gt;</ref>&gt;(</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classhelios_1_1engine_1_1state_1_1types_1_1StateTransitionRequest" kindref="compound">StateTransitionRequest&lt;GameState&gt;</ref>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>GameState::Running,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>GameStateTransitionId::Pause</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline><highlight class="normal">);</highlight></codeline>
</programlisting></para>
</sect2>
</sect1>
<sect1 id="dir_94b0c4fb82528c4245604725780b49de_1autotoc_md674">
<title>Transition Flow</title><para>1. <computeroutput>StateCommand</computeroutput> is submitted to the command buffer 2. <computeroutput>StateCommandDispatcher</computeroutput> routes it to <computeroutput>StateManager</computeroutput> 3. <computeroutput>StateManager::flush()</computeroutput> processes pending commands 4. Matching rule is found and guard is evaluated 5. Listeners are notified: <computeroutput>onStateExit</computeroutput> → <computeroutput>onStateTransition</computeroutput> → <computeroutput>onStateEnter</computeroutput> 6. Session state is updated</para>
</sect1>
<sect1 id="dir_94b0c4fb82528c4245604725780b49de_1autotoc_md675">
<title>ID Mapping</title><para>For viewport/menu activation based on state:</para>
<para><programlisting filename=".cpp"><codeline><highlight class="normal"><ref refid="classhelios_1_1engine_1_1state_1_1CombinedStateToIdMapPair" kindref="compound">CombinedStateToIdMapPair&lt;GameState, MatchState, ViewportId&gt;</ref><sp/>viewportPolicy;</highlight></codeline>
<codeline><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal">viewportPolicy.<ref refid="classhelios_1_1engine_1_1state_1_1CombinedStateToIdMapPair_1a8cf1fd9f2b32b7275f8160293997cb48" kindref="member">add</ref>(GameState::Running,<sp/>MatchState::Playing,<sp/><ref refid="namespacehelios_1_1engine_1_1core_1_1data_1ad7a3a4de437b171216482e5f1853a90e" kindref="member">ViewportId</ref>(</highlight><highlight class="stringliteral">&quot;game&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline><highlight class="normal">viewportPolicy.<ref refid="classhelios_1_1engine_1_1state_1_1CombinedStateToIdMapPair_1a8cf1fd9f2b32b7275f8160293997cb48" kindref="member">add</ref>(GameState::Paused,<sp/>MatchState::Undefined,<sp/><ref refid="namespacehelios_1_1engine_1_1core_1_1data_1ad7a3a4de437b171216482e5f1853a90e" kindref="member">ViewportId</ref>(</highlight><highlight class="stringliteral">&quot;pause&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal">viewportPolicy.<ref refid="classhelios_1_1engine_1_1state_1_1CombinedStateToIdMapPair_1abb30c593aef69fd2a47569b50ee56450" kindref="member">freeze</ref>();</highlight></codeline>
</programlisting></para>
<para><hruler/>
 <details><summary>Doxygen</summary><para></para>
<para></para>
</details></para>
</sect1>
    </detaileddescription>
    <location file="/tmp/h/include/helios/engine/state/"/>
  </compounddef>
</doxygen>
