"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[38162],{28453:(e,n,o)=>{o.d(n,{R:()=>r,x:()=>c});var s=o(96540);const i={},t=s.createContext(i);function r(e){const n=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),s.createElement(t.Provider,{value:n},e.children)}},81691:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>l,contentTitle:()=>c,default:()=>a,frontMatter:()=>r,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"core-concepts/component-registry","title":"Component Registry","description":"Modular component registration system for runtime reflection, cloning, and lifecycle hooks.","source":"@site/docs/core-concepts/component-registry.md","sourceDirName":"core-concepts","slug":"/core-concepts/component-registry","permalink":"/docs/core-concepts/component-registry","draft":false,"unlisted":false,"editUrl":"https://github.com/thorstensuckow/helios/tree/main/website/docs/core-concepts/component-registry.md","tags":[{"inline":true,"label":"ecs","permalink":"/docs/tags/ecs"},{"inline":true,"label":"architecture","permalink":"/docs/tags/architecture"},{"inline":true,"label":"registry","permalink":"/docs/tags/registry"}],"version":"current","sidebarPosition":12,"frontMatter":{"title":"Component Registry","description":"Modular component registration system for runtime reflection, cloning, and lifecycle hooks.","slug":"/core-concepts/component-registry","sidebar_label":"Component Registry","sidebar_position":12,"tags":["ecs","architecture","registry"],"keywords":["helios","component registry","ECS","reflection","cloning","lifecycle"]},"sidebar":"tutorialSidebar","previous":{"title":"Sparse Set","permalink":"/docs/core-concepts/sparse-set"},"next":{"title":"Component Lifecycle","permalink":"/docs/core-concepts/component-lifecycle"}}');var i=o(74848),t=o(28453);const r={title:"Component Registry",description:"Modular component registration system for runtime reflection, cloning, and lifecycle hooks.",slug:"/core-concepts/component-registry",sidebar_label:"Component Registry",sidebar_position:12,tags:["ecs","architecture","registry"],keywords:["helios","component registry","ECS","reflection","cloning","lifecycle"]},c="Component Registry System",l={},d=[{value:"Overview",id:"overview",level:2},{value:"Architecture",id:"architecture",level:2},{value:"Registering New Components",id:"registering-new-components",level:2},{value:"1. Create Registry File",id:"1-create-registry-file",level:3},{value:"2. Update Parent Registry",id:"2-update-parent-registry",level:3},{value:"3. Export Components Module",id:"3-export-components-module",level:3},{value:"Component Requirements",id:"component-requirements",level:2},{value:"Move/Copy Operators",id:"movecopy-operators",level:3},{value:"Optional Lifecycle Hooks",id:"optional-lifecycle-hooks",level:3},{value:"Bootstrap",id:"bootstrap",level:2},{value:"See Also",id:"see-also",level:2}];function p(e){const n={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"component-registry-system",children:"Component Registry System"})}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.strong,{children:"Component Registry System"})," enables modular registration of ECS components for runtime reflection. Each module manages its own components through a dedicated ",(0,i.jsx)(n.code,{children:"registry.ixx"})," file."]}),"\n",(0,i.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,i.jsxs)(n.p,{children:["Components must be registered with the ",(0,i.jsx)(n.code,{children:"ComponentReflector"})," to support the following features:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Cloning:"})," Copying components when spawning from prefabs"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Lifecycle Callbacks:"})," ",(0,i.jsx)(n.code,{children:"onAcquire()"}),", ",(0,i.jsx)(n.code,{children:"onRelease()"}),", ",(0,i.jsx)(n.code,{children:"onRemove()"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Enable/Disable:"})," Activating and deactivating components at runtime"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"architecture",children:"Architecture"}),"\n",(0,i.jsx)(n.p,{children:"The registry structure is organized hierarchically:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"helios.engine.Bootstrap\n\u251c\u2500\u2500 helios.engine.mechanics.registry\n\u2502   \u251c\u2500\u2500 scoring.registry\n\u2502   \u251c\u2500\u2500 health.registry\n\u2502   \u251c\u2500\u2500 spawn.registry\n\u2502   \u251c\u2500\u2500 bounds.registry\n\u2502   \u251c\u2500\u2500 combat.registry\n\u2502   \u251c\u2500\u2500 damage.registry\n\u2502   \u2514\u2500\u2500 lifecycle.registry\n\u2514\u2500\u2500 helios.engine.modules.registry\n    \u251c\u2500\u2500 ai.registry\n    \u251c\u2500\u2500 rendering.registry\n    \u2502   \u251c\u2500\u2500 renderable.registry\n    \u2502   \u2514\u2500\u2500 model.registry\n    \u251c\u2500\u2500 spatial.registry\n    \u2502   \u2514\u2500\u2500 transform.registry\n    \u251c\u2500\u2500 ui.registry\n    \u2502   \u251c\u2500\u2500 widgets.registry\n    \u2502   \u2514\u2500\u2500 transform.registry\n    \u251c\u2500\u2500 scene.registry\n    \u251c\u2500\u2500 physics.registry\n    \u2502   \u251c\u2500\u2500 collision.registry\n    \u2502   \u2514\u2500\u2500 motion.registry\n    \u2514\u2500\u2500 effects.registry\n        \u2514\u2500\u2500 gfx.registry\n"})}),"\n",(0,i.jsx)(n.h2,{id:"registering-new-components",children:"Registering New Components"}),"\n",(0,i.jsx)(n.h3,{id:"1-create-registry-file",children:"1. Create Registry File"}),"\n",(0,i.jsxs)(n.p,{children:["Each module with components requires a ",(0,i.jsx)(n.code,{children:"registry.ixx"})," file:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-cpp",children:"// helios/engine/modules/physics/collision/registry.ixx\nmodule;\n\nexport module helios.engine.modules.physics.collision.registry;\n\nimport helios.engine.ecs.ComponentReflector;\nimport helios.engine.modules.physics.collision.components;\n\nexport namespace helios::engine::modules::physics::collision {\n\n    inline void registerComponents() {\n        using R = helios::engine::ecs::ComponentReflector;\n\n        R::registerType<components::CollisionStateComponent>();\n        R::registerType<components::CollisionComponent>();\n        R::registerType<components::AabbColliderComponent>();\n    }\n\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"2-update-parent-registry",children:"2. Update Parent Registry"}),"\n",(0,i.jsx)(n.p,{children:"Add the new sub-module to the parent registry:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-cpp",children:"// helios/engine/modules/physics/registry.ixx\nmodule;\n\nexport module helios.engine.modules.physics.registry;\n\nimport helios.engine.modules.physics.collision.registry;\nimport helios.engine.modules.physics.motion.registry;\n\nexport namespace helios::engine::modules::physics {\n\n    inline void registerComponents() {\n        helios::engine::modules::physics::collision::registerComponents();\n        helios::engine::modules::physics::motion::registerComponents();\n    }\n\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"3-export-components-module",children:"3. Export Components Module"}),"\n",(0,i.jsxs)(n.p,{children:["Ensure all components are exported in the ",(0,i.jsx)(n.code,{children:"_module.ixx"})," of the ",(0,i.jsx)(n.code,{children:"components"})," directory:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-cpp",children:"// helios/engine/modules/physics/collision/components/_module.ixx\nexport module helios.engine.modules.physics.collision.components;\n\nexport import helios.engine.modules.physics.collision.components.CollisionComponent;\nexport import helios.engine.modules.physics.collision.components.CollisionStateComponent;\nexport import helios.engine.modules.physics.collision.components.AabbColliderComponent;\n"})}),"\n",(0,i.jsx)(n.h2,{id:"component-requirements",children:"Component Requirements"}),"\n",(0,i.jsx)(n.h3,{id:"movecopy-operators",children:"Move/Copy Operators"}),"\n",(0,i.jsxs)(n.p,{children:["Components ",(0,i.jsx)(n.strong,{children:"must"})," have a ",(0,i.jsx)(n.code,{children:"noexcept"})," move constructor, as ",(0,i.jsx)(n.code,{children:"std::vector"})," will otherwise use the copy constructor during reallocation:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-cpp",children:"class MyComponent {\npublic:\n    MyComponent() = default;\n    \n    // Copy\n    MyComponent(const MyComponent&) = default;\n    MyComponent& operator=(const MyComponent&) = default;\n    \n    // Move - noexcept is CRITICAL!\n    MyComponent(MyComponent&&) noexcept = default;\n    MyComponent& operator=(MyComponent&&) noexcept = default;\n};\n"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Important:"})," Without ",(0,i.jsx)(n.code,{children:"noexcept"})," on the move constructor, ",(0,i.jsx)(n.code,{children:"std::vector"})," may create unexpected copies during reallocation, leading to bugs (e.g., duplicate SceneNodes)."]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"optional-lifecycle-hooks",children:"Optional Lifecycle Hooks"}),"\n",(0,i.jsx)(n.p,{children:"Components can implement the following methods:"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Method"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"void onAcquire()"})}),(0,i.jsx)(n.td,{children:"Called when GameObject is acquired from pool"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"void onRelease()"})}),(0,i.jsx)(n.td,{children:"Called when GameObject is returned to pool"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"bool onRemove()"})}),(0,i.jsxs)(n.td,{children:["Called before removal, ",(0,i.jsx)(n.code,{children:"false"})," prevents removal"]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"void enable()"})}),(0,i.jsx)(n.td,{children:"Enables the component"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"void disable()"})}),(0,i.jsx)(n.td,{children:"Disables the component"})]})]})]}),"\n",(0,i.jsx)(n.h2,{id:"bootstrap",children:"Bootstrap"}),"\n",(0,i.jsx)(n.p,{children:"Registration is called once at engine startup:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-cpp",children:"#include <helios/engine/bootstrap.ixx>\n\nint main() {\n    // Must be called before creating GameObjects\n    helios::engine::bootstrap::registerAllComponents();\n    \n    // ... engine initialization\n}\n"})}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"registerAllComponents()"})," function is idempotent - multiple calls have no effect."]}),"\n",(0,i.jsx)(n.h2,{id:"see-also",children:"See Also"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"/docs/core-concepts/component-system",children:"Component System"})," - Component system fundamentals"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"/docs/core-concepts/component-lifecycle",children:"Component Lifecycle"})," - Lifecycle hooks in detail"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"/docs/core-concepts/ecs/gameobject",children:"GameObject"})," - High-level entity wrapper"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"/docs/core-concepts/ecs/entity-manager",children:"EntityManager"})," - Low-level entity management"]}),"\n"]})]})}function a(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(p,{...e})}):p(e)}}}]);