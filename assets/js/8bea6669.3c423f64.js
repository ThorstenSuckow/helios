"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[61728],{28453:(e,n,i)=>{i.d(n,{R:()=>a,x:()=>s});var o=i(96540);const l={},t=o.createContext(l);function a(e){const n=o.useContext(t);return o.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:a(e.components),o.createElement(t.Provider,{value:n},e.children)}},71013:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>r,contentTitle:()=>s,default:()=>p,frontMatter:()=>a,metadata:()=>o,toc:()=>c});const o=JSON.parse('{"id":"core-concepts/object-pooling","title":"Object Pooling","description":"Efficient entity lifecycle management with pre-allocated pools for frequently spawned objects.","source":"@site/docs/core-concepts/object-pooling.md","sourceDirName":"core-concepts","slug":"/core-concepts/object-pooling","permalink":"/docs/core-concepts/object-pooling","draft":false,"unlisted":false,"editUrl":"https://github.com/thorstensuckow/helios/tree/main/website/docs/core-concepts/object-pooling.md","tags":[{"inline":true,"label":"gameplay","permalink":"/docs/tags/gameplay"},{"inline":true,"label":"architecture","permalink":"/docs/tags/architecture"},{"inline":true,"label":"pooling","permalink":"/docs/tags/pooling"}],"version":"current","sidebarPosition":8,"frontMatter":{"title":"Object Pooling","description":"Efficient entity lifecycle management with pre-allocated pools for frequently spawned objects.","slug":"/core-concepts/object-pooling","sidebar_label":"Object Pooling","sidebar_position":8,"tags":["gameplay","architecture","pooling"],"keywords":["helios","object pooling","GameObjectPool","entity recycling","prefab","acquire","release"]},"sidebar":"tutorialSidebar","previous":{"title":"Spawn System","permalink":"/docs/core-concepts/spawn-system"},"next":{"title":"Text Rendering","permalink":"/docs/core-concepts/text-rendering"}}');var l=i(74848),t=i(28453);const a={title:"Object Pooling",description:"Efficient entity lifecycle management with pre-allocated pools for frequently spawned objects.",slug:"/core-concepts/object-pooling",sidebar_label:"Object Pooling",sidebar_position:8,tags:["gameplay","architecture","pooling"],keywords:["helios","object pooling","GameObjectPool","entity recycling","prefab","acquire","release"]},s="Object Pooling",r={},c=[{value:"Overview",id:"overview",level:2},{value:"Key Concepts",id:"key-concepts",level:2},{value:"Pool Lifecycle",id:"pool-lifecycle",level:3},{value:"Pool Locking",id:"pool-locking",level:3},{value:"Internal Data Structure",id:"internal-data-structure",level:3},{value:"EntityHandle Validation",id:"entityhandle-validation",level:3},{value:"Trade-offs",id:"trade-offs",level:2},{value:"Fixed Capacity",id:"fixed-capacity",level:3},{value:"Memory Overhead",id:"memory-overhead",level:3},{value:"Initialization Cost",id:"initialization-cost",level:3},{value:"Integration with Spawn System",id:"integration-with-spawn-system",level:2},{value:"Manual Integration",id:"manual-integration",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"1. Size Pools Appropriately",id:"1-size-pools-appropriately",level:3},{value:"2. Implement onAcquire/onRelease",id:"2-implement-onacquireonrelease",level:3},{value:"3. Use Pool Snapshots for Debugging",id:"3-use-pool-snapshots-for-debugging",level:3},{value:"4. Handle Pool Exhaustion Gracefully",id:"4-handle-pool-exhaustion-gracefully",level:3},{value:"Related Modules",id:"related-modules",level:2},{value:"See Also",id:"see-also",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"object-pooling",children:"Object Pooling"})}),"\n",(0,l.jsxs)(n.p,{children:["helios provides an ",(0,l.jsx)(n.strong,{children:"object pooling"})," system for efficient lifecycle management of frequently spawned entities like projectiles, particles, or enemies. The system eliminates runtime allocation overhead by pre-allocating and recycling GameObjects."]}),"\n",(0,l.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,l.jsx)(n.p,{children:"The pooling system consists of several layers:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"GameObjectPool:"})," Low-level storage tracking active/inactive EntityHandles"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"GameObjectPoolManager:"})," High-level manager for pool configuration and operations"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"GameObjectPoolRegistry:"})," Central registry mapping pool IDs to pool instances"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"GameObjectPoolConfig:"})," Declarative configuration for pool setup"]}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                      POOLING ARCHITECTURE                           \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                                                                     \u2502\n\u2502  CONFIGURATION LAYER                                                \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u2502\n\u2502  \u2502  GameObjectPoolConfig                                       \u2502    \u2502\n\u2502  \u2502  - poolId: GameObjectPoolId                                 \u2502    \u2502\n\u2502  \u2502  - prefab: GameObject*                                      \u2502    \u2502\n\u2502  \u2502  - amount: size_t                                           \u2502    \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2502\n\u2502                           \u2502                                         \u2502\n\u2502                           \u25bc                                         \u2502\n\u2502  MANAGER LAYER                                                      \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u2502\n\u2502  \u2502  GameObjectPoolManager                                      \u2502    \u2502\n\u2502  \u2502  - addPoolConfig()  \u2192 register configuration                \u2502    \u2502\n\u2502  \u2502  - init()           \u2192 create pools, clone prefabs, lock     \u2502    \u2502\n\u2502  \u2502  - acquire()        \u2192 get inactive entity                   \u2502    \u2502\n\u2502  \u2502  - release()        \u2192 return entity to pool                 \u2502    \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2502\n\u2502                           \u2502                                         \u2502\n\u2502                           \u25bc                                         \u2502\n\u2502  STORAGE LAYER                                                      \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u2502\n\u2502  \u2502  GameObjectPoolRegistry                                     \u2502    \u2502\n\u2502  \u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                   \u2502    \u2502\n\u2502  \u2502  \u2502 GameObjectPool  \u2502  \u2502 GameObjectPool  \u2502  ...              \u2502    \u2502\n\u2502  \u2502  \u2502 (bullets)       \u2502  \u2502 (enemies)       \u2502                   \u2502    \u2502\n\u2502  \u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                   \u2502    \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2502\n\u2502                                                                     \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,l.jsx)(n.h2,{id:"key-concepts",children:"Key Concepts"}),"\n",(0,l.jsx)(n.h3,{id:"pool-lifecycle",children:"Pool Lifecycle"}),"\n",(0,l.jsx)(n.p,{children:"The pooling system follows a strict lifecycle:"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Configuration:"})," Register pool configurations via ",(0,l.jsx)(n.code,{children:"addPoolConfig()"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Initialization:"})," Call ",(0,l.jsx)(n.code,{children:"init()"})," to create pools, clone prefabs, and ",(0,l.jsx)(n.strong,{children:"lock"})," pools"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Runtime:"})," Use ",(0,l.jsx)(n.code,{children:"acquire()"})," and ",(0,l.jsx)(n.code,{children:"release()"})," to manage entity lifecycle"]}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-cpp",children:'// 1. Create manager and configure pools\nGameObjectPoolManager poolManager;\n\n// Create prefab via GameWorld\nauto bulletPrefab = gameWorld.addGameObject();\nbulletPrefab.add<RenderableComponent>(mesh, material);\nbulletPrefab.add<Move2DComponent>(bulletSpeed);\nbulletPrefab.add<CollisionComponent>(BULLET_LAYER);\nbulletPrefab.setActive(false);  // Prefabs should be inactive\n\nauto bulletConfig = std::make_unique<GameObjectPoolConfig>(\n    GameObjectPoolId{"bullets"},\n    bulletPrefab,\n    100  // pool size\n);\npoolManager.addPoolConfig(std::move(bulletConfig));\n\n// 2. Initialize (clones prefabs, locks pools)\npoolManager.init(gameWorld);\n\n// 3. Runtime operations - acquire returns std::optional<GameObject>\nif (auto bullet = poolManager.acquire(GameObjectPoolId{"bullets"})) {\n    bullet->get<TranslationStateComponent>()->setTranslation(spawnPos);\n    bullet->setActive(true);\n}\n\n// Later: return to pool\npoolManager.release(GameObjectPoolId{"bullets"}, bullet->entityHandle());\n'})}),"\n",(0,l.jsx)(n.h3,{id:"pool-locking",children:"Pool Locking"}),"\n",(0,l.jsxs)(n.p,{children:["After ",(0,l.jsx)(n.code,{children:"init()"})," completes, each pool is ",(0,l.jsx)(n.strong,{children:"locked"}),". A locked pool:"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Cannot accept new EntityHandles via ",(0,l.jsx)(n.code,{children:"addInactive()"})]}),"\n",(0,l.jsx)(n.li,{children:"Has its sparse arrays sized based on min/max EntityIds"}),"\n",(0,l.jsx)(n.li,{children:"Is ready for O(1) acquire/release operations"}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:["This design optimizes memory layout but means ",(0,l.jsx)(n.strong,{children:"pool size is fixed at initialization time"}),"."]}),"\n",(0,l.jsx)(n.h3,{id:"internal-data-structure",children:"Internal Data Structure"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"GameObjectPool"})," uses a sparse-set pattern for O(1) operations:"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  GameObjectPool (sparse-set)                                        \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                                                                     \u2502\n\u2502  activeIndex_:   [0]  [1]  [2]  [3]  ...   (EntityId \u2192 dense idx)   \u2502\n\u2502                   \u2193    \u2193    \u2193    \u2193                                  \u2502\n\u2502  versionIndex_:  [1]  [1]  [2]  [1]  ...   (version per EntityId)   \u2502\n\u2502                                                                     \u2502\n\u2502  activeGameObjects_:   [handle0, handle2, handle5, ...]  (dense)    \u2502\n\u2502  inactiveGameObjects_: [handle1, handle3, handle4, ...]  (stack)    \u2502\n\u2502                                                                     \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\nPerformance:\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 Operation  \u2502 Complexity \u2502 Notes                                   \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 acquire()  \u2502 O(1)       \u2502 Pop from inactive, add to active        \u2502\n\u2502 release()  \u2502 O(1)       \u2502 Swap-and-pop from active, push inactive \u2502\n\u2502 lock()     \u2502 O(n)       \u2502 One-time sparse array allocation        \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,l.jsx)(n.h3,{id:"entityhandle-validation",children:"EntityHandle Validation"}),"\n",(0,l.jsx)(n.p,{children:"Pools track entity versions to detect stale handles:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-cpp",children:"struct EntityHandle {\n    EntityId entityId;    // Index into sparse array\n    VersionId versionId;  // Detects stale references\n};\n"})}),"\n",(0,l.jsx)(n.p,{children:"When an entity is released and re-acquired, its version may change. Attempting to release with an outdated handle is safely ignored."}),"\n",(0,l.jsx)(n.h2,{id:"trade-offs",children:"Trade-offs"}),"\n",(0,l.jsx)(n.h3,{id:"fixed-capacity",children:"Fixed Capacity"}),"\n",(0,l.jsxs)(n.p,{children:["Pool size cannot grow after initialization. If more entities are needed than the pool capacity, ",(0,l.jsx)(n.code,{children:"acquire()"})," returns ",(0,l.jsx)(n.code,{children:"nullptr"}),"."]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Mitigation:"})," Size pools based on expected maximum concurrent usage plus a safety margin."]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-cpp",children:'// Estimate: max 50 bullets on screen at once\n// Safety margin: 2x\nauto config = std::make_unique<GameObjectPoolConfig>(\n    GameObjectPoolId{"bullets"}, bulletPrefab.get(), 100\n);\n'})}),"\n",(0,l.jsx)(n.h3,{id:"memory-overhead",children:"Memory Overhead"}),"\n",(0,l.jsx)(n.p,{children:"Sparse arrays are sized for the EntityId range (max - min), which may waste memory if EntityIds are not contiguous."}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Example:"})," If a pool contains EntityIds 1000-1099, the sparse arrays will have 100 slots regardless of how many entities are actually in the pool."]}),"\n",(0,l.jsx)(n.h3,{id:"initialization-cost",children:"Initialization Cost"}),"\n",(0,l.jsxs)(n.p,{children:["All prefab clones are created upfront during ",(0,l.jsx)(n.code,{children:"init()"}),", which may cause a startup delay for large pools."]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Mitigation:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Use loading screens during initialization"}),"\n",(0,l.jsx)(n.li,{children:"Consider lazy initialization for non-critical pools (not currently supported)"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"integration-with-spawn-system",children:"Integration with Spawn System"}),"\n",(0,l.jsxs)(n.p,{children:["The pooling system integrates with the ",(0,l.jsx)(n.a,{href:"/docs/core-concepts/spawn-system",children:"Spawn System"})," through ",(0,l.jsx)(n.code,{children:"SpawnManager"}),". The recommended way to configure both pool and spawn system together is via the ",(0,l.jsx)(n.code,{children:"SpawnSystemFactory"})," builder, which co-locates pool and profile configuration under a single pool ID:"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-cpp",children:'using namespace helios::engine::builder::spawnSystem;\n\nauto spawns = SpawnSystemFactory::configure(poolManager, spawnManager);\n\nspawns.pool(GameObjectPoolId{"enemies"}, enemyPrefab, 50)\n    .profile(SpawnProfileId{"enemy_random"})\n        .randomPlacement()\n        .randomDirectionInitializer()\n        .scheduledBy(SpawnRuleId{"enemy_timer"})\n            .timerCondition(3.0f)\n            .fixedAmount(2)\n            .done()\n        .done()\n    .commit();\n'})}),"\n",(0,l.jsxs)(n.p,{children:["This registers the pool with ",(0,l.jsx)(n.code,{children:"GameObjectPoolManager"}),", the profile with ",(0,l.jsx)(n.code,{children:"SpawnManager"}),", and creates a ",(0,l.jsx)(n.code,{children:"DefaultSpawnScheduler"})," - all in one fluent call."]}),"\n",(0,l.jsx)(n.h3,{id:"manual-integration",children:"Manual Integration"}),"\n",(0,l.jsx)(n.p,{children:"For cases where the builder is not suitable:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-cpp",children:'// SpawnProfile references a pool\nSpawnProfile profile{\n    .gameObjectPoolId = GameObjectPoolId{"enemies"},\n    .spawnPlacer = std::make_unique<RandomSpawnPlacer>(),\n    .spawnInitializer = std::make_unique<MoveInitializer>(DirectionType::Random)\n};\n\n// SpawnManager uses pools internally\nspawnManager.addSpawnProfile(SpawnProfileId{"enemy_spawn"}, std::move(profile));\n'})}),"\n",(0,l.jsx)(n.p,{children:"When a spawn is requested, the SpawnManager:"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsx)(n.li,{children:"Acquires an entity from the pool"}),"\n",(0,l.jsx)(n.li,{children:"Applies the placer to set position"}),"\n",(0,l.jsx)(n.li,{children:"Runs the initializer to configure the entity"}),"\n",(0,l.jsx)(n.li,{children:"Activates the entity"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"When despawning:"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsx)(n.li,{children:"Deactivates the entity"}),"\n",(0,l.jsxs)(n.li,{children:["Calls ",(0,l.jsx)(n.code,{children:"onRelease()"})," for cleanup"]}),"\n",(0,l.jsx)(n.li,{children:"Returns the entity to the pool"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,l.jsx)(n.h3,{id:"1-size-pools-appropriately",children:"1. Size Pools Appropriately"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-cpp",children:"// Too small: acquire() may return nullptr during gameplay\nauto config = std::make_unique<GameObjectPoolConfig>(poolId, prefab, 10);\n\n// Better: estimate peak usage with safety margin\nauto config = std::make_unique<GameObjectPoolConfig>(poolId, prefab, 100);\n"})}),"\n",(0,l.jsx)(n.h3,{id:"2-implement-onacquireonrelease",children:"2. Implement onAcquire/onRelease"}),"\n",(0,l.jsx)(n.p,{children:"Components should implement lifecycle callbacks for proper state reset:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-cpp",children:"class ProjectileComponent : public CloneableComponent<ProjectileComponent> {\npublic:\n    void onAcquire() noexcept {\n        // Reset to initial state\n        velocity_ = vec3f{0, 0, 0};\n        damage_ = defaultDamage_;\n    }\n\n    void onRelease() noexcept {\n        // Cleanup if needed\n    }\n};\n"})}),"\n",(0,l.jsx)(n.h3,{id:"3-use-pool-snapshots-for-debugging",children:"3. Use Pool Snapshots for Debugging"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-cpp",children:'auto snapshot = poolManager.poolSnapshot(GameObjectPoolId{"bullets"});\nlogger.debug("Bullets: {} active, {} available",\n    snapshot.activeCount, snapshot.inactiveCount);\n'})}),"\n",(0,l.jsx)(n.h3,{id:"4-handle-pool-exhaustion-gracefully",children:"4. Handle Pool Exhaustion Gracefully"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-cpp",children:"auto* entity = poolManager.acquire(poolId);\nif (!entity) {\n    // Pool exhausted - skip spawn or use fallback behavior\n    logger.warn(\"Pool '{}' exhausted\", poolId);\n    return;\n}\n"})}),"\n",(0,l.jsx)(n.h2,{id:"related-modules",children:"Related Modules"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"Module"}),(0,l.jsx)(n.th,{children:"Purpose"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"helios.engine.runtime.pooling"})}),(0,l.jsx)(n.td,{children:"Pool classes and manager"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"helios.engine.runtime.spawn"})}),(0,l.jsx)(n.td,{children:"Spawn system integration"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"helios.engine.ecs"})}),(0,l.jsx)(n.td,{children:"EntityHandle, GameObject"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"helios.engine.core.data"})}),(0,l.jsx)(n.td,{children:"EntityId, VersionId, GameObjectPoolId"})]})]})]}),"\n",(0,l.jsx)(n.h2,{id:"see-also",children:"See Also"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.a,{href:"/docs/core-concepts/spawn-system",children:"Spawn System"})," - Entity spawning and despawning"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.a,{href:"/docs/core-concepts/command-system",children:"Command System"})," - Command-based spawn requests"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.a,{href:"/docs/core-concepts/component-system",children:"Component System"})," - CloneableComponent lifecycle"]}),"\n"]})]})}function p(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(d,{...e})}):d(e)}}}]);