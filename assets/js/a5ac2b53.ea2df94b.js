"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[72349],{20763:(n,e,i)=>{i.r(e),i.d(e,{assets:()=>l,contentTitle:()=>o,default:()=>p,frontMatter:()=>r,metadata:()=>a,toc:()=>d});const a=JSON.parse('{"id":"core-concepts/spawn-system","title":"Spawn System","description":"Entity lifecycle management with spawn scheduling, profiles, behaviors, and pool integration.","source":"@site/docs/core-concepts/spawn-system.md","sourceDirName":"core-concepts","slug":"/core-concepts/spawn-system","permalink":"/docs/core-concepts/spawn-system","draft":false,"unlisted":false,"editUrl":"https://github.com/thorstensuckow/helios/tree/main/website/docs/core-concepts/spawn-system.md","tags":[{"inline":true,"label":"gameplay","permalink":"/docs/tags/gameplay"},{"inline":true,"label":"architecture","permalink":"/docs/tags/architecture"},{"inline":true,"label":"spawn","permalink":"/docs/tags/spawn"}],"version":"current","sidebarPosition":7,"frontMatter":{"title":"Spawn System","description":"Entity lifecycle management with spawn scheduling, profiles, behaviors, and pool integration.","slug":"/core-concepts/spawn-system","sidebar_label":"Spawn System","sidebar_position":7,"tags":["gameplay","architecture","spawn"],"keywords":["helios","spawn system","object pooling","entity lifecycle","SpawnManager","SpawnScheduler"]},"sidebar":"tutorialSidebar","previous":{"title":"Event System","permalink":"/docs/core-concepts/event-system"},"next":{"title":"Object Pooling","permalink":"/docs/core-concepts/object-pooling"}}');var s=i(74848),t=i(28453);const r={title:"Spawn System",description:"Entity lifecycle management with spawn scheduling, profiles, behaviors, and pool integration.",slug:"/core-concepts/spawn-system",sidebar_label:"Spawn System",sidebar_position:7,tags:["gameplay","architecture","spawn"],keywords:["helios","spawn system","object pooling","entity lifecycle","SpawnManager","SpawnScheduler"]},o="Spawn System",l={},d=[{value:"Overview",id:"overview",level:2},{value:"Key Concepts",id:"key-concepts",level:2},{value:"SpawnProfile",id:"spawnprofile",level:3},{value:"SpawnPlacer",id:"spawnplacer",level:3},{value:"SpawnInitializer",id:"spawninitializer",level:3},{value:"Spawn Rules and Scheduling",id:"spawn-rules-and-scheduling",level:2},{value:"SpawnRule",id:"spawnrule",level:3},{value:"SpawnCondition",id:"spawncondition",level:3},{value:"SpawnAmountProvider",id:"spawnamountprovider",level:3},{value:"SpawnScheduler",id:"spawnscheduler",level:3},{value:"Command Pipeline Integration",id:"command-pipeline-integration",level:2},{value:"Commands",id:"commands",level:3},{value:"Dispatchers",id:"dispatchers",level:3},{value:"SpawnManager",id:"spawnmanager",level:3},{value:"Complete Example",id:"complete-example",level:2},{value:"Projectile Spawning",id:"projectile-spawning",level:2},{value:"Despawning",id:"despawning",level:2},{value:"Module Structure",id:"module-structure",level:2},{value:"See Also",id:"see-also",level:2}];function c(n){const e={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...n.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e.header,{children:(0,s.jsx)(e.h1,{id:"spawn-system",children:"Spawn System"})}),"\n",(0,s.jsxs)(e.p,{children:["helios provides a comprehensive ",(0,s.jsx)(e.strong,{children:"spawn system"})," for managing entity lifecycle at runtime. The system separates concerns into scheduling (when/how many), behavior (where/how), and execution (pool integration)."]}),"\n",(0,s.jsx)(e.h2,{id:"overview",children:"Overview"}),"\n",(0,s.jsx)(e.p,{children:"The spawn system consists of several layers working together:"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"SpawnScheduler:"})," Evaluates rules and determines when spawning should occur"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"SpawnProfile:"})," Defines how entities are spawned (pool, placer, initializer)"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"SpawnManager:"})," Processes spawn/despawn commands via pools"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Commands & Dispatchers:"})," Route commands through the command pipeline"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"SpawnCommandHandler:"})," Interface for managers that process spawn commands"]}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                         SPAWN PIPELINE                              \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                                                                     \u2502\n\u2502  POLICY LAYER (when/how many)                                       \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510             \u2502\n\u2502  \u2502 SpawnRule   \u2502\u2500\u2500\u2500>\u2502SpawnCondition\u2500\u2500\u2500>\u2502AmountProvider\u2502             \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518             \u2502\n\u2502         \u2502                                                           \u2502\n\u2502         \u25bc                                                           \u2502\n\u2502  SCHEDULING LAYER                                                   \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                        \u2502\n\u2502  \u2502           SpawnScheduler                \u2502                        \u2502\n\u2502  \u2502  (evaluates rules, produces plans)      \u2502                        \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                        \u2502\n\u2502                       \u2502                                             \u2502\n\u2502                       \u25bc                                             \u2502\n\u2502  COMMAND LAYER                                                      \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                        \u2502\n\u2502  \u2502     ScheduledSpawnPlanCommand           \u2502                        \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                        \u2502\n\u2502                       \u2502                                             \u2502\n\u2502                       \u25bc                                             \u2502\n\u2502  EXECUTION LAYER                                                    \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                        \u2502\n\u2502  \u2502           SpawnManager                  \u2502                        \u2502\n\u2502  \u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510         \u2502                        \u2502\n\u2502  \u2502  \u2502SpawnPlacer\u2502    \u2502Initializer\u2502         \u2502                        \u2502\n\u2502  \u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518         \u2502                        \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                        \u2502\n\u2502                                                                     \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,s.jsx)(e.h2,{id:"key-concepts",children:"Key Concepts"}),"\n",(0,s.jsx)(e.h3,{id:"spawnprofile",children:"SpawnProfile"}),"\n",(0,s.jsxs)(e.p,{children:["A ",(0,s.jsx)(e.code,{children:"SpawnProfile"})," bundles together everything needed to spawn entities of a particular type:"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-cpp",children:"import helios.engine.runtime.spawn.SpawnProfile;\nimport helios.engine.runtime.spawn.behavior.placements.RandomSpawnPlacer;\nimport helios.engine.runtime.spawn.behavior.initializers.RandomDirectionInitializer;\n\nauto enemyProfile = std::make_unique<SpawnProfile>(SpawnProfile{\n    .gameObjectPoolId = enemyPoolId,\n    .spawnPlacer = std::make_unique<RandomSpawnPlacer>(),\n    .spawnInitializer = std::make_unique<RandomDirectionInitializer>()\n});\n"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(e.table,{children:[(0,s.jsx)(e.thead,{children:(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.th,{children:"Field"}),(0,s.jsx)(e.th,{children:"Purpose"})]})}),(0,s.jsxs)(e.tbody,{children:[(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:(0,s.jsx)(e.code,{children:"gameObjectPoolId"})}),(0,s.jsx)(e.td,{children:"Which pool to acquire entities from"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:(0,s.jsx)(e.code,{children:"spawnPlacer"})}),(0,s.jsx)(e.td,{children:"Strategy for positioning spawned entities"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:(0,s.jsx)(e.code,{children:"spawnInitializer"})}),(0,s.jsx)(e.td,{children:"Strategy for initializing entity components"})]})]})]}),"\n",(0,s.jsx)(e.h3,{id:"spawnplacer",children:"SpawnPlacer"}),"\n",(0,s.jsxs)(e.p,{children:["Determines ",(0,s.jsx)(e.strong,{children:"where"})," entities spawn. Built-in implementations:"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(e.table,{children:[(0,s.jsx)(e.thead,{children:(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.th,{children:"Placer"}),(0,s.jsx)(e.th,{children:"Behavior"})]})}),(0,s.jsxs)(e.tbody,{children:[(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:(0,s.jsx)(e.code,{children:"RandomSpawnPlacer"})}),(0,s.jsx)(e.td,{children:"Random position within level bounds"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:(0,s.jsx)(e.code,{children:"EmitterSpawnPlacer"})}),(0,s.jsx)(e.td,{children:"At the emitter's current position"})]})]})]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-cpp",children:"class RandomSpawnPlacer : public SpawnPlacer {\npublic:\n    vec3f getPosition(const SpawnContext& ctx) const override {\n        const auto& bounds = ctx.level().bounds();\n        return vec3f{\n            Random::range(bounds.min()[0], bounds.max()[0]),\n            Random::range(bounds.min()[1], bounds.max()[1]),\n            0.0f\n        };\n    }\n};\n"})}),"\n",(0,s.jsx)(e.h3,{id:"spawninitializer",children:"SpawnInitializer"}),"\n",(0,s.jsx)(e.p,{children:"Configures spawned entities with initial state. Built-in implementations:"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(e.table,{children:[(0,s.jsx)(e.thead,{children:(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.th,{children:"Initializer"}),(0,s.jsx)(e.th,{children:"Behavior"})]})}),(0,s.jsxs)(e.tbody,{children:[(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:(0,s.jsx)(e.code,{children:"EmitterInitializer"})}),(0,s.jsx)(e.td,{children:"Copies direction/velocity from emitter"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:(0,s.jsx)(e.code,{children:"RandomDirectionInitializer"})}),(0,s.jsx)(e.td,{children:"Assigns random 2D direction"})]})]})]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-cpp",children:"class EmitterInitializer : public SpawnInitializer {\npublic:\n    void initialize(GameObject& entity, const SpawnContext& ctx) const override {\n        if (const auto& emitter = ctx.emitterContext()) {\n            if (auto* dir = entity.get<DirectionComponent>()) {\n                dir->setDirection(emitter->direction);\n            }\n        }\n    }\n};\n"})}),"\n",(0,s.jsx)(e.h2,{id:"spawn-rules-and-scheduling",children:"Spawn Rules and Scheduling"}),"\n",(0,s.jsx)(e.h3,{id:"spawnrule",children:"SpawnRule"}),"\n",(0,s.jsxs)(e.p,{children:["A ",(0,s.jsx)(e.code,{children:"SpawnRule"})," combines a ",(0,s.jsx)(e.strong,{children:"condition"})," (when to spawn) with an ",(0,s.jsx)(e.strong,{children:"amount provider"})," (how many):"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-cpp",children:"import helios.engine.runtime.spawn.policy.SpawnRule;\nimport helios.engine.runtime.spawn.policy.conditions.TimerSpawnCondition;\nimport helios.engine.runtime.spawn.policy.amount.FixedSpawnAmount;\n\nauto rule = std::make_unique<SpawnRule>(\n    std::make_unique<TimerSpawnCondition>(2.0f),  // Every 2 seconds\n    std::make_unique<FixedSpawnAmount>(3),        // Spawn 3 entities\n    SpawnRuleId{1}\n);\n"})}),"\n",(0,s.jsx)(e.h3,{id:"spawncondition",children:"SpawnCondition"}),"\n",(0,s.jsxs)(e.p,{children:["Determines ",(0,s.jsx)(e.strong,{children:"when"})," spawning should occur:"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(e.table,{children:[(0,s.jsx)(e.thead,{children:(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.th,{children:"Condition"}),(0,s.jsx)(e.th,{children:"Behavior"})]})}),(0,s.jsx)(e.tbody,{children:(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:(0,s.jsx)(e.code,{children:"TimerSpawnCondition"})}),(0,s.jsx)(e.td,{children:"Triggers at fixed time intervals"})]})})]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-cpp",children:"class TimerSpawnCondition : public SpawnCondition {\npublic:\n    explicit TimerSpawnCondition(float interval) : interval_(interval) {}\n    \n    bool isSatisfied(size_t amount, const SpawnRuleState& state,\n                     GameObjectPoolSnapshot pool, const UpdateContext& ctx) const override {\n        return state.sinceLastSpawn() >= interval_ \n            && pool.inactiveCount >= amount;\n    }\n    \n    void onCommit(SpawnRuleState& state, size_t count) const override {\n        state.setSinceLastSpawn(0.0f);\n    }\n};\n"})}),"\n",(0,s.jsx)(e.h3,{id:"spawnamountprovider",children:"SpawnAmountProvider"}),"\n",(0,s.jsxs)(e.p,{children:["Determines ",(0,s.jsx)(e.strong,{children:"how many"})," entities to spawn:"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(e.table,{children:[(0,s.jsx)(e.thead,{children:(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.th,{children:"Provider"}),(0,s.jsx)(e.th,{children:"Behavior"})]})}),(0,s.jsxs)(e.tbody,{children:[(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:(0,s.jsx)(e.code,{children:"FixedSpawnAmount"})}),(0,s.jsx)(e.td,{children:"Always returns a fixed count"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:(0,s.jsx)(e.code,{children:"SpawnAmountByCallback"})}),(0,s.jsx)(e.td,{children:"Delegates to a user-provided function"})]})]})]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-cpp",children:"// Dynamic amount based on game state\nauto dynamicAmount = std::make_unique<SpawnAmountByCallback>(\n    [](const GameObjectPoolId& poolId, const SpawnRuleState& state,\n       const UpdateContext& ctx) -> size_t {\n        return ctx.gameWorld().difficultyLevel() + 1;\n    }\n);\n"})}),"\n",(0,s.jsx)(e.h3,{id:"spawnscheduler",children:"SpawnScheduler"}),"\n",(0,s.jsxs)(e.p,{children:["The ",(0,s.jsx)(e.code,{children:"SpawnScheduler"})," evaluates all registered rules each frame:"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-cpp",children:"import helios.engine.runtime.spawn.scheduling.SpawnScheduler;\n\nSpawnScheduler scheduler;\n\nscheduler.addRule(enemyProfileId, std::move(rule));\n\n// In GameObjectSpawnSystem::update()\nscheduler.evaluate(updateContext);\nauto plans = scheduler.drainScheduledPlans();\n\n// Convert plans to commands\nfor (const auto& plan : plans) {\n    commandBuffer.add<ScheduledSpawnPlanCommand>(std::move(plan));\n}\n"})}),"\n",(0,s.jsx)(e.h2,{id:"command-pipeline-integration",children:"Command Pipeline Integration"}),"\n",(0,s.jsx)(e.h3,{id:"commands",children:"Commands"}),"\n",(0,s.jsx)(e.p,{children:"Spawn operations are represented as commands for deferred execution:"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(e.table,{children:[(0,s.jsx)(e.thead,{children:(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.th,{children:"Command"}),(0,s.jsx)(e.th,{children:"Purpose"})]})}),(0,s.jsxs)(e.tbody,{children:[(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:(0,s.jsx)(e.code,{children:"SpawnCommand"})}),(0,s.jsx)(e.td,{children:"Request to spawn entities from a profile"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:(0,s.jsx)(e.code,{children:"DespawnCommand"})}),(0,s.jsx)(e.td,{children:"Request to return an entity to its pool"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:(0,s.jsx)(e.code,{children:"ScheduledSpawnPlanCommand"})}),(0,s.jsx)(e.td,{children:"Execute a scheduled spawn plan"})]})]})]}),"\n",(0,s.jsx)(e.h3,{id:"dispatchers",children:"Dispatchers"}),"\n",(0,s.jsx)(e.p,{children:"Commands are routed to managers via typed dispatchers:"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-cpp",children:"import helios.engine.runtime.spawn.dispatcher.SpawnCommandDispatcher;\nimport helios.engine.runtime.spawn.dispatcher.DespawnCommandDispatcher;\nimport helios.engine.runtime.spawn.dispatcher.ScheduledSpawnPlanCommandDispatcher;\n\ncommandBuffer.addDispatcher<SpawnCommandDispatcher>();\ncommandBuffer.addDispatcher<DespawnCommandDispatcher>();\ncommandBuffer.addDispatcher<ScheduledSpawnPlanCommandDispatcher>();\n"})}),"\n",(0,s.jsx)(e.h3,{id:"spawnmanager",children:"SpawnManager"}),"\n",(0,s.jsxs)(e.p,{children:["The ",(0,s.jsx)(e.code,{children:"SpawnManager"})," processes spawn/despawn commands:"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-cpp",children:"import helios.engine.runtime.spawn.SpawnManager;\n\nauto spawnManager = std::make_unique<SpawnManager>();\n\n// Register profiles\nspawnManager->addSpawnProfile(enemyProfileId, std::move(enemyProfile));\nspawnManager->addSpawnProfile(bulletProfileId, std::move(bulletProfile));\n\n// Add to GameWorld\ngameWorld.addManager(std::move(spawnManager));\n"})}),"\n",(0,s.jsx)(e.h2,{id:"complete-example",children:"Complete Example"}),"\n",(0,s.jsx)(e.p,{children:"Here's a complete setup for an enemy spawning system:"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-cpp",children:"#include <memory>\n\nimport helios.engine.runtime.spawn;\nimport helios.engine.runtime.pooling.GameObjectPoolManager;\nimport helios.engine.mechanics.spawn.systems.GameObjectSpawnSystem;\n\n// 1. Create pool configuration\nauto poolConfig = GameObjectPoolConfig{\n    .size = 50,\n    .archetype = createEnemyArchetype()\n};\n\n// 2. Register pool with pool manager\nauto poolManager = gameWorld.getManager<GameObjectPoolManager>();\nauto enemyPoolId = poolManager->createPool(std::move(poolConfig));\n\n// 3. Create spawn profile\nauto enemyProfileId = SpawnProfileId{1};\nauto enemyProfile = std::make_unique<SpawnProfile>(SpawnProfile{\n    .gameObjectPoolId = enemyPoolId,\n    .spawnPlacer = std::make_unique<RandomSpawnPlacer>(),\n    .spawnInitializer = std::make_unique<RandomDirectionInitializer>()\n});\n\n// 4. Create spawn manager and register profile\nauto spawnManager = std::make_unique<SpawnManager>();\nspawnManager->addSpawnProfile(enemyProfileId, std::move(enemyProfile));\ngameWorld.addManager(std::move(spawnManager));\n\n// 5. Create spawn scheduler with rules\nauto scheduler = std::make_unique<SpawnScheduler>();\nscheduler->addRule(enemyProfileId, std::make_unique<SpawnRule>(\n    std::make_unique<TimerSpawnCondition>(3.0f),  // Every 3 seconds\n    std::make_unique<FixedSpawnAmount>(2),        // Spawn 2 enemies\n    SpawnRuleId{1}\n));\n\n// 6. Add spawn system to game loop\ngameLoop.phase(PhaseType::Main)\n    .addPass()\n    .addSystem<GameObjectSpawnSystem>(gameWorld, std::move(scheduler));\n\n// 7. Register dispatchers\ncommandBuffer.addDispatcher<ScheduledSpawnPlanCommandDispatcher>();\ncommandBuffer.addDispatcher<DespawnCommandDispatcher>();\n"})}),"\n",(0,s.jsx)(e.h2,{id:"projectile-spawning",children:"Projectile Spawning"}),"\n",(0,s.jsxs)(e.p,{children:["For projectiles (bullets, missiles), use the ",(0,s.jsx)(e.code,{children:"EmitterContext"})," to spawn relative to the firing entity:"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-cpp",children:"// In ShootComponent or similar\nvoid fire(const UpdateContext& ctx, const vec3f& position, const vec3f& direction) {\n    SpawnContext spawnCtx;\n    spawnCtx.emitterContext = EmitterContext{\n        .position = position,\n        .direction = direction,\n        .velocity = direction * bulletSpeed_\n    };\n    \n    ctx.commandBuffer().add<SpawnCommand>(bulletProfileId, spawnCtx, 1);\n}\n"})}),"\n",(0,s.jsxs)(e.p,{children:["The ",(0,s.jsx)(e.code,{children:"EmitterSpawnPlacer"})," and ",(0,s.jsx)(e.code,{children:"EmitterInitializer"})," then use this context:"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-cpp",children:"auto bulletProfile = std::make_unique<SpawnProfile>(SpawnProfile{\n    .gameObjectPoolId = bulletPoolId,\n    .spawnPlacer = std::make_unique<EmitterSpawnPlacer>(),\n    .spawnInitializer = std::make_unique<EmitterInitializer>()\n});\n"})}),"\n",(0,s.jsx)(e.h2,{id:"despawning",children:"Despawning"}),"\n",(0,s.jsxs)(e.p,{children:["To return entities to their pool, use ",(0,s.jsx)(e.code,{children:"DespawnCommand"}),":"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-cpp",children:"// When entity should be removed (e.g., out of bounds, destroyed)\nctx.commandBuffer().add<DespawnCommand>(entity->guid(), profileId);\n"})}),"\n",(0,s.jsxs)(e.p,{children:["The ",(0,s.jsx)(e.code,{children:"LevelBoundsBehaviorComponent"})," with ",(0,s.jsx)(e.code,{children:"BoundsBehavior::Despawn"})," handles this automatically for entities leaving the level bounds."]}),"\n",(0,s.jsx)(e.h2,{id:"module-structure",children:"Module Structure"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:"helios.engine.runtime.spawn/\n\u251c\u2500\u2500 SpawnManager.ixx               # Manager processing commands\n\u251c\u2500\u2500 SpawnProfile.ixx               # Profile configuration\n\u251c\u2500\u2500 SpawnContext.ixx               # Context for spawn operations\n\u251c\u2500\u2500 EmitterContext.ixx             # Emitter state for projectiles\n\u251c\u2500\u2500 SpawnCommandHandler.ixx        # Interface for command handlers\n\u251c\u2500\u2500 SpawnCommandHandlerRegistry.ixx # Registry mapping profiles to handlers\n\u251c\u2500\u2500 behavior/\n\u2502   \u251c\u2500\u2500 SpawnPlacer.ixx            # Placement interface\n\u2502   \u251c\u2500\u2500 SpawnInitializer.ixx       # Initialization interface\n\u2502   \u251c\u2500\u2500 placements/                # Concrete placers\n\u2502   \u2514\u2500\u2500 initializers/              # Concrete initializers\n\u251c\u2500\u2500 policy/\n\u2502   \u251c\u2500\u2500 SpawnCondition.ixx         # Condition interface\n\u2502   \u251c\u2500\u2500 SpawnRule.ixx              # Rule combining condition + amount\n\u2502   \u251c\u2500\u2500 amount/                    # Amount providers\n\u2502   \u2514\u2500\u2500 conditions/                # Concrete conditions\n\u251c\u2500\u2500 scheduling/\n\u2502   \u251c\u2500\u2500 SpawnScheduler.ixx         # Rule evaluation\n\u2502   \u251c\u2500\u2500 SpawnPlan.ixx              # Planned spawn data\n\u2502   \u2514\u2500\u2500 ScheduledSpawnPlan.ixx     # Plan with profile ID\n\u251c\u2500\u2500 commands/                      # Spawn/Despawn commands\n\u251c\u2500\u2500 dispatcher/                    # Command dispatchers\n\u2514\u2500\u2500 events/                        # Frame events\n"})}),"\n",(0,s.jsx)(e.h2,{id:"see-also",children:"See Also"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.a,{href:"/docs/core-concepts/component-system",children:"Component System"})," \u2014 Components used by spawned entities"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.a,{href:"/docs/core-concepts/gameloop-architecture",children:"Game Loop Architecture"})," \u2014 How spawning integrates with phases"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.a,{href:"/docs/core-concepts/command-system",children:"Command System"})," \u2014 Command pipeline for spawn commands"]}),"\n"]})]})}function p(n={}){const{wrapper:e}={...(0,t.R)(),...n.components};return e?(0,s.jsx)(e,{...n,children:(0,s.jsx)(c,{...n})}):c(n)}},28453:(n,e,i)=>{i.d(e,{R:()=>r,x:()=>o});var a=i(96540);const s={},t=a.createContext(s);function r(n){const e=a.useContext(t);return a.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function o(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(s):n.components||s:r(n.components),a.createElement(t.Provider,{value:e},n.children)}}}]);