"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[88522],{28453:(e,n,r)=>{r.d(n,{R:()=>s,x:()=>l});var t=r(96540);const i={},o=t.createContext(i);function s(e){const n=t.useContext(o);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),t.createElement(o.Provider,{value:n},e.children)}},31902:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>d,contentTitle:()=>l,default:()=>h,frontMatter:()=>s,metadata:()=>t,toc:()=>a});const t=JSON.parse('{"id":"examples/render-text-demo","title":"Text Rendering Demo","description":"Example: FreeType-based text rendering with dynamic updates, font loading, and orthographic projection.","source":"@site/docs/examples/render-text-demo.md","sourceDirName":"examples","slug":"/examples/render-text-demo","permalink":"/docs/examples/render-text-demo","draft":false,"unlisted":false,"editUrl":"https://github.com/thorstensuckow/helios/tree/main/website/docs/examples/render-text-demo.md","tags":[{"inline":true,"label":"examples","permalink":"/docs/tags/examples"},{"inline":true,"label":"text","permalink":"/docs/tags/text"},{"inline":true,"label":"rendering","permalink":"/docs/tags/rendering"},{"inline":true,"label":"freetype","permalink":"/docs/tags/freetype"}],"version":"current","frontMatter":{"title":"Text Rendering Demo","description":"Example: FreeType-based text rendering with dynamic updates, font loading, and orthographic projection.","slug":"/examples/render-text-demo","sidebar_label":"Text Rendering","tags":["examples","text","rendering","freetype"],"keywords":["helios","text rendering","FreeType","font","glyph","OpenGL"]},"sidebar":"tutorialSidebar","previous":{"title":"Collision Detection","permalink":"/docs/examples/collision-detection"},"next":{"title":"Testing","permalink":"/docs/testing"}}');var i=r(74848),o=r(28453);const s={title:"Text Rendering Demo",description:"Example: FreeType-based text rendering with dynamic updates, font loading, and orthographic projection.",slug:"/examples/render-text-demo",sidebar_label:"Text Rendering",tags:["examples","text","rendering","freetype"],keywords:["helios","text rendering","FreeType","font","glyph","OpenGL"]},l="Text Rendering Demo",d={},a=[{value:"What You&#39;ll Learn",id:"what-youll-learn",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Project Structure",id:"project-structure",level:2},{value:"Step-by-Step Tutorial",id:"step-by-step-tutorial",level:2},{value:"1. Application and Window Setup",id:"1-application-and-window-setup",level:3},{value:"2. Orthographic Projection",id:"2-orthographic-projection",level:3},{value:"3. Shader Setup",id:"3-shader-setup",level:3},{value:"4. Font Loading",id:"4-font-loading",level:3},{value:"5. Text Prototype and Renderable",id:"5-text-prototype-and-renderable",level:3},{value:"6. Render Loop",id:"6-render-loop",level:3},{value:"Key Concepts",id:"key-concepts",level:2},{value:"Text Rendering Pipeline",id:"text-rendering-pipeline",level:3},{value:"Coordinate System",id:"coordinate-system",level:3},{value:"Running the Example",id:"running-the-example",level:2},{value:"Expected Output",id:"expected-output",level:2},{value:"See Also",id:"see-also",level:2}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"text-rendering-demo",children:"Text Rendering Demo"})}),"\n",(0,i.jsx)(n.p,{children:"This example demonstrates how to render dynamic text using the helios text rendering system. It showcases FreeType-based glyph rendering with OpenGL, including font loading, text positioning, and real-time text updates."}),"\n",(0,i.jsx)(n.h2,{id:"what-youll-learn",children:"What You'll Learn"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Setting up the text rendering pipeline"}),"\n",(0,i.jsxs)(n.li,{children:["Loading fonts with ",(0,i.jsx)(n.code,{children:"TextRenderer::addFontFamily()"})]}),"\n",(0,i.jsxs)(n.li,{children:["Creating ",(0,i.jsx)(n.code,{children:"TextRenderPrototype"})," for shared shader configuration"]}),"\n",(0,i.jsxs)(n.li,{children:["Using ",(0,i.jsx)(n.code,{children:"TextRenderable"})," for dynamic text display"]}),"\n",(0,i.jsxs)(n.li,{children:["Building ",(0,i.jsx)(n.code,{children:"TextRenderCommand"})," objects for the render queue"]}),"\n",(0,i.jsx)(n.li,{children:"Configuring orthographic projection for 2D text"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"helios framework properly built and installed"}),"\n",(0,i.jsx)(n.li,{children:"Basic understanding of C++ and OpenGL"}),"\n",(0,i.jsx)(n.li,{children:"FreeType library (automatically included via helios)"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"project-structure",children:"Project Structure"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"render_text_demo/\n\u251c\u2500\u2500 main.cpp                           # Main application code\n\u251c\u2500\u2500 resources/\n\u2502   \u251c\u2500\u2500 font_shader.vert              # Vertex shader for text\n\u2502   \u251c\u2500\u2500 font_shader.frag              # Fragment shader for text\n\u2502   \u251c\u2500\u2500 Roboto-SemiBoldItalic.ttf     # Font file\n\u2502   \u251c\u2500\u2500 OFL.txt                       # Font license\n\u2502   \u2514\u2500\u2500 README.txt                    # Font attribution\n\u2514\u2500\u2500 README.md                         # This file\n"})}),"\n",(0,i.jsx)(n.h2,{id:"step-by-step-tutorial",children:"Step-by-Step Tutorial"}),"\n",(0,i.jsx)(n.h3,{id:"1-application-and-window-setup",children:"1. Application and Window Setup"}),"\n",(0,i.jsx)(n.p,{children:"Create an OpenGL application with a configured viewport:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-cpp",children:'const auto app = helios::ext::glfw::app::GLFWFactory::makeOpenGLApp(\n    "helios - Text Rendering Demo", 800, 600, 4, 3\n);\n\nauto win = dynamic_cast<helios::ext::glfw::window::GLFWWindow*>(app->current());\nauto mainViewport = std::make_shared<helios::rendering::Viewport>(0.0f, 0.0f, 1.0f, 1.0f);\n\nmainViewport->setClearFlags(std::to_underlying(helios::rendering::ClearFlags::Color))\n              .setClearColor(helios::math::vec4f(0.051f, 0.051f, 0.153f, 1.0f));\nwin->addViewport(mainViewport);\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"What's happening:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Creates a window with 4:3 aspect ratio"}),"\n",(0,i.jsx)(n.li,{children:"Configures a viewport covering the entire window"}),"\n",(0,i.jsx)(n.li,{children:"Sets a dark blue clear color"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"2-orthographic-projection",children:"2. Orthographic Projection"}),"\n",(0,i.jsx)(n.p,{children:"Text rendering uses orthographic projection where screen coordinates map directly to pixels:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-cpp",children:"helios::math::mat4f projection = helios::math::ortho(\n    0.0f, 800.0f,   // left, right\n    0.0f, 600.0f,   // bottom, top\n    -1.0f, 100.0f   // near, far\n);\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"What's happening:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"(0, 0)"})," is the bottom-left corner of the screen"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"(800, 600)"})," is the top-right corner"]}),"\n",(0,i.jsx)(n.li,{children:"Text position is specified in screen pixels"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"3-shader-setup",children:"3. Shader Setup"}),"\n",(0,i.jsx)(n.p,{children:"The text shader requires specific uniform locations for projection, texture, and color:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-cpp",children:'auto uniformLocationMap = std::make_unique<\n    helios::ext::opengl::rendering::shader::OpenGLUniformLocationMap\n>();\nuniformLocationMap->set(UniformSemantics::ProjectionMatrix, 1);\nuniformLocationMap->set(UniformSemantics::TextTexture, 3);\nuniformLocationMap->set(UniformSemantics::TextColor, 4);\n\nauto shader = std::make_shared<helios::ext::opengl::rendering::shader::OpenGLShader>(\n    "resources/font_shader.vert",\n    "resources/font_shader.frag",\n    helios::util::io::BasicStringFileReader()\n);\nshader->setUniformLocationMap(std::move(uniformLocationMap));\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsxs)(n.strong,{children:["Vertex Shader (",(0,i.jsx)(n.code,{children:"font_shader.vert"}),"):"]})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-glsl",children:"#version 430 core\n\nlayout(location = 0) in vec4 vertex;  // <vec2 pos, vec2 tex>\nout vec2 TexCoords;\n\nlayout (location=1) uniform mat4 projectionMatrix;\n\nvoid main() {\n    gl_Position = projectionMatrix * vec4(vertex.xy, 0.0, 1.0);\n    TexCoords = vertex.zw;\n}\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsxs)(n.strong,{children:["Fragment Shader (",(0,i.jsx)(n.code,{children:"font_shader.frag"}),"):"]})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-glsl",children:"#version 430 core\n\nin vec2 TexCoords;\nout vec4 color;\n\nlayout (location=3) uniform sampler2D text;\nlayout (location=4) uniform vec4 textColor;\n\nvoid main() {\n    vec4 sampled = vec4(1.0, 1.0, 1.0, texture(text, TexCoords).r);\n    color = textColor * sampled;\n}\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Key Points:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["The vertex shader combines position and texture coordinates in a single ",(0,i.jsx)(n.code,{children:"vec4"})]}),"\n",(0,i.jsx)(n.li,{children:"The fragment shader samples the red channel as alpha (FreeType grayscale glyphs)"}),"\n",(0,i.jsx)(n.li,{children:"Text color is applied as a uniform"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"4-font-loading",children:"4. Font Loading"}),"\n",(0,i.jsx)(n.p,{children:"Register a font family with the text renderer:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-cpp",children:'auto WorkbenchFont = helios::engine::core::data::FontId{"workbench"};\n\nauto& openGlDevice = app->renderingDevice();\nopenGlDevice.textRenderer().addFontFamily(\n    WorkbenchFont, \n    "resources/Roboto-SemiBoldItalic.ttf"\n);\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"What's happening:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"FontId"}),' creates a unique identifier from the string "workbench"']}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"addFontFamily()"})," loads the TTF file and caches glyph textures"]}),"\n",(0,i.jsx)(n.li,{children:"Default character range is ASCII 0-127"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"5-text-prototype-and-renderable",children:"5. Text Prototype and Renderable"}),"\n",(0,i.jsx)(n.p,{children:"Create a reusable prototype and a text instance:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-cpp",children:'// Shared prototype with shader configuration\nauto textPrototype = std::make_shared<helios::rendering::text::TextRenderPrototype>(\n    shader, \n    std::make_shared<helios::rendering::text::config::TextShaderProperties>()\n);\n\n// Instance-specific text renderable\nauto textRenderable = std::make_unique<helios::rendering::text::TextRenderable>(\n    "Hello World",\n    textPrototype,\n    helios::rendering::text::DrawProperties{\n        .fontId = WorkbenchFont,\n        .position = helios::math::vec2f{50.0f, 50.0f}\n    },\n    helios::rendering::text::config::TextShaderPropertiesOverride{\n        .baseColor = helios::util::Colors::Pink\n    }\n);\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"What's happening:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"TextRenderPrototype"})," holds shared shader and text properties"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"TextRenderable"})," combines the prototype with instance-specific data"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"DrawProperties"})," specifies font, position, and scale"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"TextShaderPropertiesOverride"})," allows per-instance color customization"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"6-render-loop",children:"6. Render Loop"}),"\n",(0,i.jsx)(n.p,{children:"Update and render text each frame:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-cpp",children:'unsigned int i = 0;\nwhile (!win->shouldClose()) {\n    inputManager.poll(0.0f);\n\n    if (inputManager.isKeyPressed(helios::input::types::Key::ESC)) {\n        win->setShouldClose(true);\n    }\n\n    // Frame uniforms\n    auto frameUniformValues = std::make_unique<helios::rendering::shader::UniformValueMap>();\n    frameUniformValues->set(UniformSemantics::ProjectionMatrix, projection);\n    frameUniformValues->set(UniformSemantics::TextTexture, \n        helios::ext::opengl::rendering::OpenGLGlyphTextRenderer::textTextureUnit());\n\n    // Update text dynamically\n    textRenderable->setText(std::format("Hello World {0}", i++));\n\n    // Build uniform values from renderable\n    auto uniformValues = helios::rendering::shader::UniformValueMap();\n    textRenderable->writeUniformValues(uniformValues);\n\n    // Create render command\n    auto textRenderCommand = helios::rendering::text::TextRenderCommand(\n        std::string{textRenderable->text()},\n        textPrototype.get(),\n        textRenderable->drawProperties(),\n        uniformValues\n    );\n\n    // Build render queue and pass\n    auto uiRenderQueue = std::make_unique<helios::rendering::RenderQueue>();\n    uiRenderQueue->add(std::move(textRenderCommand));\n\n    auto uiRenderPass = helios::rendering::RenderPass(mainViewport, std::move(uiRenderQueue));\n    uiRenderPass.setFrameUniformValues(std::move(frameUniformValues));\n\n    openGlDevice.render(uiRenderPass);\n    win->swapBuffers();\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"What's happening:"})}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Poll input and check for ESC key"}),"\n",(0,i.jsx)(n.li,{children:"Set up frame-level uniforms (projection, texture unit)"}),"\n",(0,i.jsx)(n.li,{children:"Update the text string dynamically"}),"\n",(0,i.jsx)(n.li,{children:"Write uniform values from the renderable"}),"\n",(0,i.jsxs)(n.li,{children:["Create a ",(0,i.jsx)(n.code,{children:"TextRenderCommand"})," with all rendering data"]}),"\n",(0,i.jsx)(n.li,{children:"Add to render queue and execute the render pass"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"key-concepts",children:"Key Concepts"}),"\n",(0,i.jsx)(n.h3,{id:"text-rendering-pipeline",children:"Text Rendering Pipeline"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"TextRenderable (high-level)\n       \u2502\n       \u25bc\nTextRenderCommand (low-level, per-frame)\n       \u2502\n       \u25bc\nRenderQueue\n       \u2502\n       \u25bc\nOpenGLGlyphTextRenderer (FreeType + OpenGL)\n"})}),"\n",(0,i.jsx)(n.h3,{id:"coordinate-system",children:"Coordinate System"}),"\n",(0,i.jsx)(n.p,{children:"Text uses screen-space coordinates with orthographic projection:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"(0, 600) \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 (800, 600)\n    \u2502                            \u2502\n    \u2502     Text appears here      \u2502\n    \u2502     at (50, 50)            \u2502\n    \u2502         \u25cf                  \u2502\n    \u2502                            \u2502\n(0, 0) \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 (800, 0)\n"})}),"\n",(0,i.jsx)(n.h2,{id:"running-the-example",children:"Running the Example"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"cd build/examples/render_text_demo\n./main\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Press ",(0,i.jsx)(n.strong,{children:"ESC"})," to close the application."]}),"\n",(0,i.jsx)(n.h2,{id:"expected-output",children:"Expected Output"}),"\n",(0,i.jsx)(n.p,{children:'A window displaying "Hello World X" where X increments each frame, rendered in pink text on a dark blue background.'}),"\n",(0,i.jsx)(n.h2,{id:"see-also",children:"See Also"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"/docs/core-concepts/text-rendering",children:"Text Rendering Guide"})}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"/docs/examples/simple-cube",children:"Simple Cube Rendering"})," - Basic 3D rendering"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"/docs/examples/spaceship-control",children:"Spaceship Control"})," - Complete game loop example"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}}}]);