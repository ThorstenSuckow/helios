"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[16462],{25604:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>i,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"core-concepts/ecs/overview","title":"ECS Architecture","description":"Entity-Component-System architecture overview for the helios game engine.","source":"@site/docs/core-concepts/ecs/overview.md","sourceDirName":"core-concepts/ecs","slug":"/core-concepts/ecs","permalink":"/docs/core-concepts/ecs","draft":false,"unlisted":false,"editUrl":"https://github.com/thorstensuckow/helios/tree/main/website/docs/core-concepts/ecs/overview.md","tags":[{"inline":true,"label":"ecs","permalink":"/docs/tags/ecs"},{"inline":true,"label":"architecture","permalink":"/docs/tags/architecture"},{"inline":true,"label":"overview","permalink":"/docs/tags/overview"}],"version":"current","sidebarPosition":0,"frontMatter":{"title":"ECS Architecture","description":"Entity-Component-System architecture overview for the helios game engine.","slug":"/core-concepts/ecs","sidebar_label":"Overview","sidebar_position":0,"tags":["ecs","architecture","overview"],"keywords":["helios","ECS","entity","component","system","architecture"]},"sidebar":"tutorialSidebar","previous":{"title":"Text Rendering","permalink":"/docs/core-concepts/text-rendering"},"next":{"title":"Component Structure","permalink":"/docs/core-concepts/ecs/component-structure"}}');var c=t(74848),r=t(28453);const i={title:"ECS Architecture",description:"Entity-Component-System architecture overview for the helios game engine.",slug:"/core-concepts/ecs",sidebar_label:"Overview",sidebar_position:0,tags:["ecs","architecture","overview"],keywords:["helios","ECS","entity","component","system","architecture"]},o="ECS Architecture",l={},d=[{value:"Overview",id:"overview",level:2},{value:"Module Structure",id:"module-structure",level:2},{value:"Quick Start",id:"quick-start",level:2},{value:"Data Flow",id:"data-flow",level:2},{value:"Key Features",id:"key-features",level:2},{value:"Versioned Handles",id:"versioned-handles",level:3},{value:"Type-Indexed Storage",id:"type-indexed-storage",level:3},{value:"Cache-Friendly Iteration",id:"cache-friendly-iteration",level:3},{value:"Compile-Time Lifecycle Detection",id:"compile-time-lifecycle-detection",level:3},{value:"Documentation",id:"documentation",level:2},{value:"Entity Management",id:"entity-management",level:3},{value:"Querying &amp; Processing",id:"querying--processing",level:3},{value:"Storage &amp; Reflection",id:"storage--reflection",level:3},{value:"See Also",id:"see-also",level:2}];function a(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(n.header,{children:(0,c.jsx)(n.h1,{id:"ecs-architecture",children:"ECS Architecture"})}),"\n",(0,c.jsxs)(n.p,{children:["The ",(0,c.jsx)(n.strong,{children:"Entity-Component-System (ECS)"})," architecture in helios separates data (Components) from behavior (Systems), enabling flexible and cache-friendly game object composition."]}),"\n",(0,c.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                        GameWorld                            \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510     \u2502\n\u2502  \u2502  EntityRegistry  \u2502\u25c4\u2500\u2500\u2500\u2502      EntityManager         \u2502     \u2502\n\u2502  \u2502  (handle alloc)  \u2502    \u2502  (component storage)       \u2502     \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518     \u2502\n\u2502           \u2502                          \u25b2                      \u2502\n\u2502           \u25bc                          \u2502                      \u2502\n\u2502    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510           \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510              \u2502\n\u2502    \u2502 EntityHandle \u2502\u25c4\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2502  GameObject  \u2502              \u2502\n\u2502    \u2502 (id+version) \u2502           \u2502   (facade)   \u2502              \u2502\n\u2502    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518           \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518              \u2502\n\u2502                                      \u2502                      \u2502\n\u2502                               \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2510               \u2502\n\u2502                               \u2502    View     \u2502               \u2502\n\u2502                               \u2502  (queries)  \u2502               \u2502\n\u2502                               \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518               \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                    \u2502\n        \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n        \u25bc                       \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502     Systems       \u2502   \u2502     Component Reflection          \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502   \u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u2502\n\u2502  \u2502   System     \u2502 \u2502   \u2502  \u2502ComponentOps \u2502 \u2502  Traits     \u2502  \u2502\n\u2502  \u2502  (Updatable) \u2502 \u2502   \u2502  \u2502  Registry   \u2502 \u2502 (concepts)  \u2502  \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502   \u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,c.jsx)(n.h2,{id:"module-structure",children:"Module Structure"}),"\n",(0,c.jsxs)(n.p,{children:["The ",(0,c.jsx)(n.code,{children:"helios.engine.ecs"})," module exports the following classes:"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,c.jsxs)(n.table,{children:[(0,c.jsx)(n.thead,{children:(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.th,{children:"Class"}),(0,c.jsx)(n.th,{children:"Purpose"})]})}),(0,c.jsxs)(n.tbody,{children:[(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:(0,c.jsx)(n.a,{href:"/docs/core-concepts/ecs/component-structure",children:"Component Structure"})}),(0,c.jsx)(n.td,{children:"Required structure for components (Copy/Move)"})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:(0,c.jsx)(n.a,{href:"/docs/core-concepts/ecs/gameobject",children:"GameObject"})}),(0,c.jsx)(n.td,{children:"High-level entity facade (~16 bytes, pass-by-value)"})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:(0,c.jsx)(n.a,{href:"/docs/core-concepts/ecs/entity-handle",children:"EntityHandle"})}),(0,c.jsx)(n.td,{children:"Versioned entity reference (8 bytes)"})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:(0,c.jsx)(n.a,{href:"/docs/core-concepts/ecs/entity-registry",children:"EntityRegistry"})}),(0,c.jsx)(n.td,{children:"Handle allocation & validation"})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:(0,c.jsx)(n.a,{href:"/docs/core-concepts/ecs/entity-manager",children:"EntityManager"})}),(0,c.jsx)(n.td,{children:"Component storage via SparseSets"})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:(0,c.jsx)(n.a,{href:"/docs/core-concepts/ecs/view",children:"View"})}),(0,c.jsx)(n.td,{children:"Component-based entity queries"})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:(0,c.jsx)(n.a,{href:"/docs/core-concepts/ecs/system",children:"System"})}),(0,c.jsx)(n.td,{children:"Game logic processor base class"})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:(0,c.jsx)(n.a,{href:"/docs/core-concepts/ecs/updatable",children:"Updatable"})}),(0,c.jsx)(n.td,{children:"Interface for per-frame updates"})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:(0,c.jsx)(n.a,{href:"/docs/core-concepts/sparse-set",children:"SparseSet"})}),(0,c.jsx)(n.td,{children:"O(1) component storage"})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:(0,c.jsx)(n.a,{href:"/docs/core-concepts/ecs/traits",children:"Traits"})}),(0,c.jsx)(n.td,{children:"Compile-time lifecycle hook detection"})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:(0,c.jsx)(n.a,{href:"/docs/core-concepts/ecs/component-ops",children:"ComponentOps"})}),(0,c.jsx)(n.td,{children:"Function pointers for lifecycle callbacks"})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:(0,c.jsx)(n.a,{href:"/docs/core-concepts/ecs/component-ops#componentopsregistry",children:"ComponentOpsRegistry"})}),(0,c.jsx)(n.td,{children:"Global registry for ComponentOps"})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:(0,c.jsx)(n.a,{href:"/docs/core-concepts/component-registry",children:"ComponentReflector"})}),(0,c.jsx)(n.td,{children:"Type registration helper"})]})]})]}),"\n",(0,c.jsx)(n.h2,{id:"quick-start",children:"Quick Start"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-cpp",children:"// 1. Get a GameObject from the world\nauto player = gameWorld.addGameObject();\n\n// 2. Add components\nplayer.add<TransformComponent>(position);\nplayer.add<HealthComponent>(100.0f);\nplayer.add<VelocityComponent>();\n\n// 3. Query entities in systems\nfor (auto [entity, transform, velocity, active] : gameWorld.view<\n    TransformComponent,\n    VelocityComponent,\n    Active\n>().whereEnabled()) {\n    transform->position += velocity->direction * deltaTime;\n}\n"})}),"\n",(0,c.jsx)(n.h2,{id:"data-flow",children:"Data Flow"}),"\n",(0,c.jsxs)(n.ol,{children:["\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.strong,{children:"Entity Creation"}),": ",(0,c.jsx)(n.code,{children:"EntityRegistry"})," allocates versioned handle"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.strong,{children:"Component Attachment"}),": ",(0,c.jsx)(n.code,{children:"EntityManager"})," stores in type-indexed ",(0,c.jsx)(n.code,{children:"SparseSet"})]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.strong,{children:"Queries"}),": ",(0,c.jsx)(n.code,{children:"View"})," iterates entities with matching components"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.strong,{children:"Updates"}),": ",(0,c.jsx)(n.code,{children:"System"})," processes entities each frame"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.strong,{children:"Destruction"}),": Handle version incremented, index recycled"]}),"\n"]}),"\n",(0,c.jsx)(n.h2,{id:"key-features",children:"Key Features"}),"\n",(0,c.jsx)(n.h3,{id:"versioned-handles",children:"Versioned Handles"}),"\n",(0,c.jsx)(n.p,{children:"Detect stale references to destroyed entities:"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-cpp",children:"auto handle = registry.create();\nregistry.destroy(handle);\nregistry.isValid(handle);  // false\n"})}),"\n",(0,c.jsx)(n.h3,{id:"type-indexed-storage",children:"Type-Indexed Storage"}),"\n",(0,c.jsx)(n.p,{children:"O(1) component access without hash lookups:"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-cpp",children:"auto* health = entity.get<HealthComponent>();  // Direct array access\n"})}),"\n",(0,c.jsx)(n.h3,{id:"cache-friendly-iteration",children:"Cache-Friendly Iteration"}),"\n",(0,c.jsxs)(n.p,{children:["Contiguous memory layout in ",(0,c.jsx)(n.code,{children:"SparseSet"}),":"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-cpp",children:"for (auto [e, t, v, a] : view<Transform, Velocity, Active>()) {\n    // Components stored contiguously\n}\n"})}),"\n",(0,c.jsx)(n.h3,{id:"compile-time-lifecycle-detection",children:"Compile-Time Lifecycle Detection"}),"\n",(0,c.jsx)(n.p,{children:"Traits detect hooks without runtime overhead:"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-cpp",children:"// Detected at compile time via concepts\nif constexpr (traits::HasOnAcquire<T>) {\n    component->onAcquire();\n}\n"})}),"\n",(0,c.jsx)(n.h2,{id:"documentation",children:"Documentation"}),"\n",(0,c.jsx)(n.h3,{id:"entity-management",children:"Entity Management"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.a,{href:"/docs/core-concepts/ecs/gameobject",children:"GameObject"})," - The entity facade you'll use most"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.a,{href:"/docs/core-concepts/ecs/entity-handle",children:"EntityHandle"})," - How entity references work"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.a,{href:"/docs/core-concepts/ecs/entity-registry",children:"EntityRegistry"})," - Handle lifecycle internals"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.a,{href:"/docs/core-concepts/ecs/entity-manager",children:"EntityManager"})," - Component storage details"]}),"\n"]}),"\n",(0,c.jsx)(n.h3,{id:"querying--processing",children:"Querying & Processing"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.a,{href:"/docs/core-concepts/ecs/view",children:"View"})," - Efficient component queries"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.a,{href:"/docs/core-concepts/ecs/system",children:"System"})," - Writing game logic"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.a,{href:"/docs/core-concepts/ecs/updatable",children:"Updatable"})," - Per-frame update interface"]}),"\n"]}),"\n",(0,c.jsx)(n.h3,{id:"storage--reflection",children:"Storage & Reflection"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.a,{href:"/docs/core-concepts/sparse-set",children:"SparseSet"})," - The underlying data structure"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.a,{href:"/docs/core-concepts/ecs/traits",children:"Traits"})," - Compile-time hook detection"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.a,{href:"/docs/core-concepts/ecs/component-ops",children:"ComponentOps"})," - Lifecycle function pointers"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.a,{href:"/docs/core-concepts/component-registry",children:"Component Registry"})," - Type registration"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.a,{href:"/docs/core-concepts/component-lifecycle",children:"Component Lifecycle"})," - Hooks and callbacks"]}),"\n"]}),"\n",(0,c.jsx)(n.h2,{id:"see-also",children:"See Also"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.a,{href:"/docs/core-concepts/component-system",children:"Component System"})," - High-level ECS concepts"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.a,{href:"/docs/core-concepts/gameloop-architecture",children:"Game Loop Architecture"})," - How systems execute"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.a,{href:"/docs/core-concepts/spawn-system",children:"Spawn System"})," - Entity pooling and spawning"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,c.jsx)(n,{...e,children:(0,c.jsx)(a,{...e})}):a(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>i,x:()=>o});var s=t(96540);const c={},r=s.createContext(c);function i(e){const n=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(c):e.components||c:i(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);